{% extends 'base.html' %}

{% block content %}
  <!-- Welcome Header -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">{{ t('hello') }}, {{ current_user.name }}! ğŸ‘‹</h1>
    <p class="text-gray-600 dark:text-gray-400 mt-2">Here's what's happening with your business today.</p>
  </div>

  <!-- Metric Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <!-- Active Clients Card -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition">
      <div class="flex items-center justify-between mb-4">
        <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center">
          <i class="icon-users text-blue-600 dark:text-blue-400 text-2xl"></i>
        </div>
      </div>
      <h3 class="text-gray-600 dark:text-gray-400 text-sm font-medium mb-1">{{ t('active_clients') }}</h3>
      <p class="text-4xl font-bold text-gray-900 dark:text-white">{{ active_clients }}</p>
    </div>

    <!-- Pending Payments Card -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition">
      <div class="flex items-center justify-between mb-4">
        <div class="w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center">
          <i class="icon-dollar-sign text-green-600 dark:text-green-400 text-2xl"></i>
        </div>
      </div>
      <h3 class="text-gray-600 dark:text-gray-400 text-sm font-medium mb-1">{{ t('pending_payments') }}</h3>
      <p class="text-4xl font-bold text-green-600 dark:text-green-400">${{ "%.2f"|format(pending_amount) }}</p>
    </div>
    
    <!-- Quick Actions Card -->
    <div class="bg-gradient-to-br from-blue-500 to-indigo-600 dark:from-blue-600 dark:to-indigo-700 rounded-xl shadow-md p-6 text-white hover:shadow-lg transition">
      <h3 class="text-white text-sm font-medium mb-4 opacity-90">Quick Actions</h3>
      <div class="space-y-2">
        <a href="/clients/add" class="block bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 text-sm font-medium transition">
          + {{ t('add_client') }}
        </a>
        <a href="/projects/add" class="block bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 text-sm font-medium transition">
          + {{ t('add_project') }}
        </a>
      </div>
    </div>
  </div>

  <!-- Upcoming Deadlines Section -->
  <div class="bg-white dark:bg-gray-800 rounded-xl shadow-md border border-gray-100 dark:border-gray-700">
    <div class="px-6 py-4 border-b border-gray-100 dark:border-gray-700">
      <h2 class="text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2">
        <i class="icon-calendar text-gray-600 dark:text-gray-400"></i>
        {{ t('upcoming_deadlines') }}
      </h2>
    </div>
    
    <div class="p-6">
      {% if upcoming_deadlines %}
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead>
              <tr class="border-b border-gray-200 dark:border-gray-700">
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400">{{ t('project') }}</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400">{{ t('client') }}</th>
                <th class="text-left py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400">{{ t('deadline') }}</th>
              </tr>
            </thead>
            <tbody>
              {% for d in upcoming_deadlines %}
                <tr class="border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition">
                  <td class="py-3 px-4 text-sm font-medium text-gray-900 dark:text-white">{{ d['title'] }}</td>
                  <td class="py-3 px-4 text-sm text-gray-600 dark:text-gray-400">{{ d['client_name'] or '-' }}</td>
                  <td class="py-3 px-4 text-sm text-gray-600 dark:text-gray-400">{{ d['deadline'] }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% else %}
        <div class="text-center py-12">
          <i class="icon-calendar text-gray-300 dark:text-gray-600 text-5xl mb-4"></i>
          <p class="text-gray-500 dark:text-gray-400">{{ t('no_deadlines') }}</p>
        </div>
      {% endif %}
    </div>
  </div>
{% endblock %}
